<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>
  </head>
  <body>
    <div id="container"></div>
    <script src="http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.4.3.min.js"></script>
    <script defer="defer">
      var json = '{"attrs":{"width":578,"height":200},"nodeType":"Stage","children":[{"attrs":{},"nodeType":"Layer","children":[{"attrs":{"width":"auto","height":"auto","text":"Text Shadow!","fontFamily":"Calibri","fontSize":95,"x":20,"y":20,"stroke":"red","strokeWidth":2,"shadowColor":"black","shadowBlur":2,"shadowOffset":{"x":10,"y":10},"shadowOpacity":0.5},"nodeType":"Shape","shapeType":"Text"},{"attrs":{"stroke":"green","strokeWidth":10,"lineJoin":"round","lineCap":"round","points":[{"x":50,"y":140},{"x":450,"y":160}],"shadowColor":"black","shadowBlur":10,"shadowOffset":{"x":5,"y":5},"shadowOpacity":0.5},"nodeType":"Shape","shapeType":"Line"},{"attrs":{"x":280,"y":100,"width":100,"height":50,"fill":"#00D2FF","stroke":"black","strokeWidth":4,"shadowColor":"black","shadowBlur":10,"shadowOffset":{"x":5,"y":5},"shadowOpacity":0.5,"rotation":0.3490658503988659,"id":"blueRectangle"},"nodeType":"Shape","shapeType":"Rect"},{"attrs":{"x":100,"y":41,"width":106,"height":118,"id":"yodaImage"},"nodeType":"Shape","shapeType":"Image"}]}]}';
      
      var stage = Kinetic.Node.create(json, 'container');

      /*
       * set functions
       */
      stage.get('#blueRectangle').on('mouseover mouseout', function() {
        var stroke = this.getStroke();
        this.setStroke(stroke === 'black' ? 'red' : 'black');
        stage.draw();
      });
      /*
       * set images
       */
      var imageObj = new Image();
      imageObj.onload = function() {
        stage.get('#yodaImage')[0].setImage(imageObj);
        stage.draw();
      };
      imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/yoda.jpg';

    </script>
  </body>
</html>